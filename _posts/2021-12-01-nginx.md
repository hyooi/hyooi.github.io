---
layout: post
title:  "Nginx http to https 강제 리다이렉트"
categories:
- 서버
tags:
- nginx
---

### 1. http? https?
http는 IT와 관련없는 사람일지라도 본 적이 있을 정도의 필수적인 프로토콜이다.

웹에 있어 없어서는 안될 프로토콜이지만 그 자체로는 보안이 되지 않으므로, 
흔히 말하는 **인증서**를 붙여 안전한 통신이 가능하도록 하는데 이 때 쓰는 프로토콜을 **https**라고 한다.

이번에는 nginx를 통해 서버 접근 시 http를 사용했다면,
<ins>https로 강제 리다이렉트</ins>하도록 설정하는 내용을 포스팅하려고 한다.

<br/>

### 2. nginx설정
<var>/etc/nginx/nginx.conf</var>를 편집한다.
아래와 같이, <ins>특정 도메인의 80포트로 접근했다면 무조건 https로 포워딩</ins>한다.

```bash

http {
    server {
        listen 80;
        server_name 182.162.100.161;

        return 301 https://gitlab.kello.com;
    }

    server {
        listen 80;
        server_name *.kello.com;

        return 301 https://$host$request_uri;
    }
}
```

### 3. 유효성 검사
```bash
dev@userver100-161:~$ nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
```

<br/>

### 4. 재기동
